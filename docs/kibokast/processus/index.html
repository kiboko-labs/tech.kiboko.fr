<!DOCTYPE html>
<html lang="fr-fr">
  <head>
  <meta charset="utf-8">
  <title>Les processus dans Oro</title>

  <meta name="generator" content="Hugo 0.147.3">

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <!-- ** Plugins Needed for the Project ** -->
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://tech.kiboko.fr/plugins/bootstrap/bootstrap.min.css">

  <!-- themefy-icon -->
  <link rel="stylesheet" href="https://tech.kiboko.fr/plugins/themify-icons/themify-icons.css">

  <!-- highlight -->
  <link rel="stylesheet" href="https://tech.kiboko.fr/plugins/highlight/hybrid.css">

  <!--Favicon-->
  <link rel="icon" href="https://tech.kiboko.fr/images/favicon.png" type="image/x-icon">

  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css?family=Libre%20Franklin%2c%20Helvetica%20Neue%2c%20Helvetica%2c%20Arial%2c%20Sans-Serif:300,400,700&display=swap" rel="stylesheet">
  
  <style>
  :root{
    --primary-color: #222;
    --body-color:#ddd;
    --text-color:#000;
    --text-color-dark:#333;
    --white-color:#eee;
    --light-color:#ddd;
    --font-family:Libre Franklin, Helvetica Neue, Helvetica, Arial, Sans-Serif;
  }
  </style>

<!-- Main Stylesheet -->

<link href="https://tech.kiboko.fr/css/style.min.css" rel="stylesheet" media="screen"/>

<!-- jquiry -->
<script src="https://tech.kiboko.fr/plugins/jquery/jquery-1.12.4.js"></script>

<!-- jquary ui -->
<script src="https://tech.kiboko.fr/plugins/jquery/jquery-ui.js"></script>

<!-- Bootstrap JS -->
<script src="https://tech.kiboko.fr/plugins/bootstrap/bootstrap.min.js"></script>

<!-- match-height JS -->
<script src="https://tech.kiboko.fr/plugins/match-height/jquery.matchHeight-min.js"></script>

<!-- highlight -->
<script src="https://tech.kiboko.fr/plugins/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



</head>
  
  <body>
    
    <!-- header -->
    <header class="shadow-bottom sticky-top bg-white">
      <nav class="navbar navbar-expand-md navbar-light">
  <div class="container">
    <a class="navbar-brand px-2" href="/">
      
      
      
      
      <div class="navbar-brand">
          <img class="img-fluid" src="https://tech.kiboko.fr/images/logo.png" alt="Tech.Kiboko.fr">
          <span class="title">Tech.Kiboko.fr</span>
      </div>
      
      
    </a>
    <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation"
      aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse text-center" id="navigation">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link text-dark" href="/"></a>
        </li>
        
        
        <li class="nav-item">
          <a class="nav-link text-dark" href="/kibokast">Kibokast</a>
        </li>
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-dark" href="#" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            docs
          </a>
          <div class="dropdown-menu">
            
            <a class="dropdown-item" href="/oro">Oro</a>
            
            <a class="dropdown-item" href="/docker">Docker</a>
            
            <a class="dropdown-item" href="/autre">Autre</a>
            
            <a class="dropdown-item" href="/composer">Composer</a>
            
            <a class="dropdown-item" href="/env-local">Environnement local</a>
            
            <a class="dropdown-item" href="/kubernetes">Kubernetes</a>
            
            <a class="dropdown-item" href="/sql">SQL</a>
            
          </div>
        </li>
        
        
        
        <li class="nav-item">
          <a class="nav-link text-dark" href="http://kiboko.fr/fr/contactez-nous/">Contactez-nous</a>
        </li>
        
        
      </ul>
      
    </div>
  </div>
</nav>

    </header>
    <!-- /header -->
    
    

<!-- details page -->
<section class="single section-sm pb-0">
  <div class="container">
    <div class="row">
      <div class="col-lg-3">
        <div class="sidebar">
          <ul class="list-styled">
            
            <a class="back-btn" href="/"></a>
            
              
              








<li data-nav-id="https://tech.kiboko.fr/kibokast/" title="Kibokast" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/">
    Kibokast
  </a>
  
  
    <ul>
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/symfony-proxy/" title="Proxy Symfony" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/symfony-proxy/">
    Proxy Symfony
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/commandes-symfony-oro/" title="Commandes Symfony, Oro et Doctrine" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/commandes-symfony-oro/">
    Commandes Symfony, Oro et Doctrine
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/scss-dans-oro/" title="SCSS dans Oro" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/scss-dans-oro/">
    SCSS dans Oro
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/processus/" title="Les processus dans Oro" class="sidelist
  active">
  <a href="https://tech.kiboko.fr/kibokast/processus/">
    Les processus dans Oro
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/monolog/" title="Monolog" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/monolog/">
    Monolog
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/exceptions/" title="Exceptions" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/exceptions/">
    Exceptions
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/doctrine-type/" title="Doctrine type" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/doctrine-type/">
    Doctrine type
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/code-review/" title="Code review" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/code-review/">
    Code review
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/commandes-debug/" title="Commandes Debug" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/commandes-debug/">
    Commandes Debug
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/collections-doctrine/" title="Collections Doctrine" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/collections-doctrine/">
    Collections Doctrine
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/principes-solid/" title="Principes SOLID" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/principes-solid/">
    Principes SOLID
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/utilisation-des-commandes-kloud/" title="Utilisation des commandes Kloud" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/utilisation-des-commandes-kloud/">
    Utilisation des commandes Kloud
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/utilisation-tmetric/" title="Utilisation Tmetric" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/utilisation-tmetric/">
    Utilisation Tmetric
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/migrations-oro/" title="Migrations Oro" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/migrations-oro/">
    Migrations Oro
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/usage-github/" title="Usage Github" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/usage-github/">
    Usage Github
  </a>
  
  
</li>


        
      
        
          








<li data-nav-id="https://tech.kiboko.fr/kibokast/utilisation-stack-docker-kiboko/" title="Utilisation stack Docker Kiboko" class="sidelist
  ">
  <a href="https://tech.kiboko.fr/kibokast/utilisation-stack-docker-kiboko/">
    Utilisation stack Docker Kiboko
  </a>
  
  
</li>


        
      
    </ul>
  
</li>


              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
          </ul>
        </div>
      </div>
      <div class="col-lg-9">
        <div class="p-lg-5 p-4 bg-white">
          <h2 class="mb-5 category-title">
              
              Les processus dans Oro
          </h2>
          <p></p>
          
            <p class="post-meta border-bottom pb-3 mb-0 mt-3">11/12/2020</p>
          
          
          <div class="content"><h2 id="quest-ce-quun-processus-dans-oro-">Qu&rsquo;est ce qu&rsquo;un processus dans Oro ?</h2>
<p>Les Processes permettent d&rsquo;effectuer des tâches automatique lorsqu&rsquo;une entité du système est créé, modifiée ou supprimée.</p>
<p>Doc. officielle : <a href="https://doc.oroinc.com/backend/entities-data-management/processes/">https://doc.oroinc.com/backend/entities-data-management/processes/</a></p>
<blockquote>
<p>Les processus offrent la possibilité d&rsquo;automatiser les tâches liées à la gestion des entités. Ils utilisent les principaux événements de doctrine pour exécuter les tâches décrites au bon moment. Chaque processus peut être exécuté immédiatement ou après un délai. Les processus utilisent le composant OroMessageQueue et le bundle pour offrir la possibilité d&rsquo;une exécution retardée.
<em>(traduit depuis Oro)</em></p></blockquote>
<p>Exemple d&rsquo;utilisation : lorsqu&rsquo;une commande est créé (l&rsquo;entité \Order\Bundle\OrderBundle\Entity\Order) celle-ci est envoyé à un ERP.</p>
<h2 id="oro-processess">Oro Processess</h2>
<ul>
<li>Bundle OroWorkflowBundle</li>
<li>Fonctionnalité allégée par rapport aux Workflows</li>
<li>Repose sur les entités de l&rsquo;ORM de Doctrine et ses événements + Components d&rsquo;OroPlatform</li>
<li>Définit dans un fichier <code>&lt;MyBundle&gt;/Resources/config/oro/processes.yml</code></li>
</ul>
<h3 id="avantages--inconvénients">Avantages / inconvénients</h3>
<p>Les plus :</p>
<ul>
<li>facile à mettre en place et à comprendre</li>
<li>pour des tâches assez simple</li>
<li>peu, voir pas de code nécessaire</li>
</ul>
<p>Les moins :</p>
<ul>
<li>compliqué à débugger : création d&rsquo;un job, puis placement de breakpoints dans les actions ou conditions correspondantes</li>
</ul>
<h3 id="format-du-fichier-processesyml">Format du fichier <code>Processes.yml</code></h3>
<p>Constituté de 2 sections principales :</p>
<ul>
<li>définition : label, actif ou non, préconditions, actions</li>
<li>trigger (le déclencheur) : par le bias d&rsquo;un cron, via doctrine persistance (create, update, delete), avec retard ou immédiatement, dans le messaque queue ou non</li>
</ul>
<p><strong>Exemple</strong></p>
<p>Dans le bundle Order : <a href="https://github.com/oroinc/orocommerce/blob/master/src/Oro/Bundle/OrderBundle/Resources/config/oro/processes.yml">https://github.com/oroinc/orocommerce/blob/master/src/Oro/Bundle/OrderBundle/Resources/config/oro/processes.yml</a></p>
<h2 id="commandes">Commandes</h2>
<h4 id="pour-charger-la-configuration-des-processus">Pour charger la configuration des processus</h4>
<p>Commande à éxécuter dès qu&rsquo;on modifie un fichier <code>processess.yml</code></p>
<p><code>bin/console oro:process:configuration:load</code></p>
<blockquote>
<p>This command loads processes configuration from .yml configuration files to the database. It is used during application installation and update. The command has two optional options:</p>
<p>–directories - this option specifies directories used to find configuration files (multiple values allowed)</p>
<p>–definitions - this option specifies names of the process definitions that should be loaded (multiple values allowed)</p></blockquote>
<h4 id="pour-débugger-les-actions-et-conditions">Pour débugger les actions et conditions</h4>
<p><code>bin/console oro:debug:action</code> : Commande pour débugger les différentes actions et les paramètres à utiliser, fournit la liste des actions disponibles</p>
<p><code>bin/console oro:debug:condition</code> : Commande pour débugger les différentes conditions, fournit la liste des conditions disponibles</p>
<p>Doc. officielle : <a href="https://doc.oroinc.com/backend/entities-data-management/actions/commands/">https://doc.oroinc.com/backend/entities-data-management/actions/commands/</a></p>
<ul>
<li>Actions : tag &ldquo;name: oro_action.action&rdquo;</li>
<li>Conditions : tag &ldquo;name: oro_condition.condition&rdquo;</li>
</ul>
<p><em>Note : également présent dans les Workflows</em></p>
<h2 id="détails-et-débug">Détails et débug</h2>
<h4 id="différences-entre---">Différences entre <code>$</code> &amp; <code>$.</code></h4>
<ul>
<li><code>$</code>= Entité en cours</li>
</ul>
<p>Ex: <code>$</code> = <code>\Order\Bundle\OrderBundle\Entity\Order</code></p>
<ul>
<li><code>$.</code>= ProcessData = données contextuelles du process en cours</li>
</ul>
<h4 id="comment-débugger-">Comment débugger ?</h4>
<ul>
<li>Activé xdebug</li>
<li>Créer un job dans la table oro_process_job</li>
<li>Chercher l&rsquo;action ou la condition à débugger (cf commandes en fin de présentation)</li>
<li>Lancer <code>bin/console oro:process:handle-trigger --id=&lt;ID&gt; --name=&lt;PROCESS_NAME&gt;</code></li>
</ul>
<p><strong>Source :</strong> Présentation effectuée par Sylvain Rayé, <a href="https://www.diglin.com/fr/">Diglin</a></p>
</div>
          
          <nav class="pagination mt-3">
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            
            
            

            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            
            
            
            
            
            
            
            

            
            
            

            
            
            
            
            
            
            

            
            <a class="nav nav-prev" href="https://tech.kiboko.fr/kibokast/scss-dans-oro/"><i class="ti-arrow-left mr-2"></i> <span class="d-none d-md-block">SCSS dans Oro</span></a>
            
            
            <a class="nav nav-next" href="https://tech.kiboko.fr/kibokast/monolog/"> <span class="d-none d-md-block">Monolog</span><i class="ti-arrow-right ml-2"></i></a>
            
          </nav>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- /details page -->









    <!-- footer -->
<footer class="section pb-4">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-8 text-md-left text-center">
        <!-- legal notice -->
          <a href="/legal-notice">
            <p class="mb-md-0 mb-4">Mentions légales</p>
          </a>
        <!-- /legal notice -->
      </div>
      <div class="col-md-4 text-md-right text-center">
        <ul class="list-inline list-social">
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="https://twitter.com/kibokolabs"><i class="ti-twitter-alt"></i></a></li>
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="https://github.com/kiboko-labs"><i class="ti-github"></i></a></li>
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="https://www.linkedin.com/company/kiboko-sas"><i class="ti-linkedin"></i></a></li>
          
          <li class="list-inline-item"><a class="text-color d-inline-block p-2" href="http://kiboko.fr/fr/"><i class="ti-wordpress"></i></a></li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>
<!-- /footer -->

<!-- Main Script -->

<script src="https://tech.kiboko.fr/js/script.min.js"></script>

  </body>

</html>